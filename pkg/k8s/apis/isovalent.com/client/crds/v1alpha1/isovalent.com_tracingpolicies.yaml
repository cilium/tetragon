
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: tracingpolicies.isovalent.com
spec:
  group: isovalent.com
  names:
    kind: TracingPolicy
    listKind: TracingPolicyList
    plural: tracingpolicies
    singular: tracingpolicy
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Tracing policy specification.
            properties:
              kprobes:
                description: A list of kprobe specs.
                items:
                  properties:
                    args:
                      description: A list of function arguments to include in the
                        trace output.
                      items:
                        properties:
                          index:
                            description: Position of the argument.
                            format: int32
                            minimum: 0
                            type: integer
                          returnCopy:
                            default: false
                            description: This field is used only for char_buf and
                              char_iovec types.
                            type: boolean
                          sizeArgIndex:
                            description: Specifies the position of the corresponding
                              size argument for this argument. This field is used
                              only for char_buf and char_iovec types.
                            format: int32
                            minimum: 0
                            type: integer
                          type:
                            description: Argument type.
                            enum:
                            - int
                            - uint32
                            - int32
                            - uint64
                            - int64
                            - char_buf
                            - char_iovec
                            - size_t
                            - skb
                            - sock
                            - string
                            - fd
                            - file
                            - filename
                            - path
                            - nop
                            type: string
                        required:
                        - index
                        - type
                        type: object
                      type: array
                    call:
                      description: Name of the function to apply the kprobe spec to.
                      type: string
                    return:
                      default: false
                      description: Indicates whether to collect return value of the
                        traced function.
                      type: boolean
                    returnArg:
                      description: A return argument to include in the trace output.
                      properties:
                        index:
                          description: Position of the argument.
                          format: int32
                          minimum: 0
                          type: integer
                        returnCopy:
                          default: false
                          description: This field is used only for char_buf and char_iovec
                            types.
                          type: boolean
                        sizeArgIndex:
                          description: Specifies the position of the corresponding
                            size argument for this argument. This field is used only
                            for char_buf and char_iovec types.
                          format: int32
                          minimum: 0
                          type: integer
                        type:
                          description: Argument type.
                          enum:
                          - int
                          - uint32
                          - int32
                          - uint64
                          - int64
                          - char_buf
                          - char_iovec
                          - size_t
                          - skb
                          - sock
                          - string
                          - fd
                          - file
                          - filename
                          - path
                          - nop
                          type: string
                      required:
                      - index
                      - type
                      type: object
                    selectors:
                      description: Selectors to apply before producing trace output.
                        Selectors are ORed.
                      items:
                        description: KProbeSelector selects function calls for kprobe
                          based on PIDs and function arguments. The results of MatchPIDs
                          and MatchArgs are ANDed.
                        properties:
                          matchActions:
                            description: A list of actions to execute when this selector
                              matches
                            items:
                              properties:
                                action:
                                  description: Action to execute.
                                  enum:
                                  - Post
                                  - FollowFD
                                  - UnfollowFD
                                  - Sigkill
                                  type: string
                                argError:
                                  description: error value for override action
                                  format: int32
                                  type: integer
                                argFd:
                                  description: An arg index for the fd for fdInstall
                                    action
                                  format: int32
                                  type: integer
                                argName:
                                  description: An arg index for the filename for fdInstall
                                    action
                                  format: int32
                                  type: integer
                              required:
                              - action
                              type: object
                            type: array
                          matchArgs:
                            description: A list of argument filters. MatchArgs are
                              ANDed.
                            items:
                              properties:
                                index:
                                  description: Position of the argument to apply fhe
                                    filter to.
                                  format: int32
                                  minimum: 0
                                  type: integer
                                operator:
                                  description: Filter operation.
                                  enum:
                                  - Equal
                                  - NotEqual
                                  - Prefix
                                  - Postfix
                                  type: string
                                values:
                                  description: Value to compare the argument against.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - index
                              - operator
                              - values
                              type: object
                            type: array
                          matchBinaries:
                            description: A list of binary exec name filters.
                            items:
                              properties:
                                operator:
                                  description: Filter operation.
                                  enum:
                                  - In
                                  type: string
                                values:
                                  description: Value to compare the argument against.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchCapabilities:
                            description: A list of capabilities and IDs
                            items:
                              properties:
                                isNamespaceCapability:
                                  default: false
                                  description: Indicates whether these caps are namespace
                                    caps.
                                  type: boolean
                                operator:
                                  description: Namespace selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                type:
                                  default: Effective
                                  description: Type of capabilities
                                  enum:
                                  - Effective
                                  - Inheritable
                                  - Permitted
                                  type: string
                                values:
                                  description: Capabilities to match.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchCapabilityChanges:
                            description: IDs for capabilities changes
                            items:
                              properties:
                                isNamespaceCapability:
                                  default: false
                                  description: Indicates whether these caps are namespace
                                    caps.
                                  type: boolean
                                operator:
                                  description: Namespace selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                type:
                                  default: Effective
                                  description: Type of capabilities
                                  enum:
                                  - Effective
                                  - Inheritable
                                  - Permitted
                                  type: string
                                values:
                                  description: Capabilities to match.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchNamespaceChanges:
                            description: IDs for namespace changes
                            items:
                              properties:
                                operator:
                                  description: Namespace selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                values:
                                  description: Process IDs to match.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchNamespaces:
                            description: A list of namespaces and IDs
                            items:
                              properties:
                                namespace:
                                  description: Namespace selector name.
                                  enum:
                                  - Uts
                                  - Ipc
                                  - Mnt
                                  - Pid
                                  - PidForChildren
                                  - Net
                                  - Time
                                  - TimeForChildren
                                  - Cgroup
                                  - User
                                  type: string
                                operator:
                                  description: Namespace selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                values:
                                  description: Process IDs to match.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - namespace
                              - operator
                              - values
                              type: object
                            type: array
                          matchPIDs:
                            description: A list of process ID filters. MatchPIDs are
                              ANDed.
                            items:
                              properties:
                                followForks:
                                  default: false
                                  description: Matches any descendant processes of
                                    the matching PIDs.
                                  type: boolean
                                isNamespacePID:
                                  default: false
                                  description: Indicates whether PIDs are namespace
                                    PIDs.
                                  type: boolean
                                operator:
                                  description: PID selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                values:
                                  description: Process IDs to match.
                                  items:
                                    format: int32
                                    type: integer
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchReturnArgs:
                            description: A list of argument filters. MatchArgs are
                              ANDed.
                            items:
                              properties:
                                index:
                                  description: Position of the argument to apply fhe
                                    filter to.
                                  format: int32
                                  minimum: 0
                                  type: integer
                                operator:
                                  description: Filter operation.
                                  enum:
                                  - Equal
                                  - NotEqual
                                  - Prefix
                                  - Postfix
                                  type: string
                                values:
                                  description: Value to compare the argument against.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - index
                              - operator
                              - values
                              type: object
                            type: array
                        type: object
                      type: array
                    syscall:
                      default: true
                      description: Indicates whether the traced function is a syscall.
                      type: boolean
                  required:
                  - call
                  type: object
                type: array
              tracepoints:
                description: A list of tracepoint specs.
                items:
                  properties:
                    args:
                      description: A list of function arguments to include in the
                        trace output.
                      items:
                        properties:
                          index:
                            description: Position of the argument.
                            format: int32
                            minimum: 0
                            type: integer
                          returnCopy:
                            default: false
                            description: This field is used only for char_buf and
                              char_iovec types.
                            type: boolean
                          sizeArgIndex:
                            description: Specifies the position of the corresponding
                              size argument for this argument. This field is used
                              only for char_buf and char_iovec types.
                            format: int32
                            minimum: 0
                            type: integer
                          type:
                            description: Argument type.
                            enum:
                            - int
                            - uint32
                            - int32
                            - uint64
                            - int64
                            - char_buf
                            - char_iovec
                            - size_t
                            - skb
                            - sock
                            - string
                            - fd
                            - file
                            - filename
                            - path
                            - nop
                            type: string
                        required:
                        - index
                        - type
                        type: object
                      type: array
                    event:
                      description: Tracepoint event
                      type: string
                    selectors:
                      description: Selectors to apply before producing trace output.
                        Selectors are ORed.
                      items:
                        description: KProbeSelector selects function calls for kprobe
                          based on PIDs and function arguments. The results of MatchPIDs
                          and MatchArgs are ANDed.
                        properties:
                          matchActions:
                            description: A list of actions to execute when this selector
                              matches
                            items:
                              properties:
                                action:
                                  description: Action to execute.
                                  enum:
                                  - Post
                                  - FollowFD
                                  - UnfollowFD
                                  - Sigkill
                                  type: string
                                argError:
                                  description: error value for override action
                                  format: int32
                                  type: integer
                                argFd:
                                  description: An arg index for the fd for fdInstall
                                    action
                                  format: int32
                                  type: integer
                                argName:
                                  description: An arg index for the filename for fdInstall
                                    action
                                  format: int32
                                  type: integer
                              required:
                              - action
                              type: object
                            type: array
                          matchArgs:
                            description: A list of argument filters. MatchArgs are
                              ANDed.
                            items:
                              properties:
                                index:
                                  description: Position of the argument to apply fhe
                                    filter to.
                                  format: int32
                                  minimum: 0
                                  type: integer
                                operator:
                                  description: Filter operation.
                                  enum:
                                  - Equal
                                  - NotEqual
                                  - Prefix
                                  - Postfix
                                  type: string
                                values:
                                  description: Value to compare the argument against.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - index
                              - operator
                              - values
                              type: object
                            type: array
                          matchBinaries:
                            description: A list of binary exec name filters.
                            items:
                              properties:
                                operator:
                                  description: Filter operation.
                                  enum:
                                  - In
                                  type: string
                                values:
                                  description: Value to compare the argument against.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchCapabilities:
                            description: A list of capabilities and IDs
                            items:
                              properties:
                                isNamespaceCapability:
                                  default: false
                                  description: Indicates whether these caps are namespace
                                    caps.
                                  type: boolean
                                operator:
                                  description: Namespace selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                type:
                                  default: Effective
                                  description: Type of capabilities
                                  enum:
                                  - Effective
                                  - Inheritable
                                  - Permitted
                                  type: string
                                values:
                                  description: Capabilities to match.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchCapabilityChanges:
                            description: IDs for capabilities changes
                            items:
                              properties:
                                isNamespaceCapability:
                                  default: false
                                  description: Indicates whether these caps are namespace
                                    caps.
                                  type: boolean
                                operator:
                                  description: Namespace selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                type:
                                  default: Effective
                                  description: Type of capabilities
                                  enum:
                                  - Effective
                                  - Inheritable
                                  - Permitted
                                  type: string
                                values:
                                  description: Capabilities to match.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchNamespaceChanges:
                            description: IDs for namespace changes
                            items:
                              properties:
                                operator:
                                  description: Namespace selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                values:
                                  description: Process IDs to match.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchNamespaces:
                            description: A list of namespaces and IDs
                            items:
                              properties:
                                namespace:
                                  description: Namespace selector name.
                                  enum:
                                  - Uts
                                  - Ipc
                                  - Mnt
                                  - Pid
                                  - PidForChildren
                                  - Net
                                  - Time
                                  - TimeForChildren
                                  - Cgroup
                                  - User
                                  type: string
                                operator:
                                  description: Namespace selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                values:
                                  description: Process IDs to match.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - namespace
                              - operator
                              - values
                              type: object
                            type: array
                          matchPIDs:
                            description: A list of process ID filters. MatchPIDs are
                              ANDed.
                            items:
                              properties:
                                followForks:
                                  default: false
                                  description: Matches any descendant processes of
                                    the matching PIDs.
                                  type: boolean
                                isNamespacePID:
                                  default: false
                                  description: Indicates whether PIDs are namespace
                                    PIDs.
                                  type: boolean
                                operator:
                                  description: PID selector operator.
                                  enum:
                                  - In
                                  - NotIn
                                  type: string
                                values:
                                  description: Process IDs to match.
                                  items:
                                    format: int32
                                    type: integer
                                  type: array
                              required:
                              - operator
                              - values
                              type: object
                            type: array
                          matchReturnArgs:
                            description: A list of argument filters. MatchArgs are
                              ANDed.
                            items:
                              properties:
                                index:
                                  description: Position of the argument to apply fhe
                                    filter to.
                                  format: int32
                                  minimum: 0
                                  type: integer
                                operator:
                                  description: Filter operation.
                                  enum:
                                  - Equal
                                  - NotEqual
                                  - Prefix
                                  - Postfix
                                  type: string
                                values:
                                  description: Value to compare the argument against.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - index
                              - operator
                              - values
                              type: object
                            type: array
                        type: object
                      type: array
                    subsystem:
                      description: Tracepoint subsystem
                      type: string
                  required:
                  - event
                  - subsystem
                  type: object
                type: array
            type: object
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
